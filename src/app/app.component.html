<!-- <button (click)="create()">创建地址</button> -->
<!-- <br>
<input type="text" [(ngModel)]="address">
<button (click)="add()">+1</button> -->
<!-- <button (click)="conn()">连接远程地址</button> -->

<!-- <div
  cdkDropList
  cdkDrag
  [cdkDropListData]="timePeriods"
  class="example-list"
  (cdkDropListDropped)="drop($event)">
  <div class="example-box" [cdkDragData]="item" *ngFor="let item of timePeriods" cdkDrag>{{item}}</div>
</div> -->

<div style="height: 100%" cdkDropListGroup>
  <mat-grid-list style="height: 100%" [cols]="storyMap.functionColList.length + 1" rowHeight="70px">
    <ng-container >
      <mat-grid-tile rowspan="2">
        <inline-edit [content]="storyMap.name"></inline-edit>
      </mat-grid-tile>
      <mat-grid-tile rowspan="2" *ngFor="let functionCol of storyMap.functionColList">
        <inline-edit [content]="functionCol"></inline-edit>
      </mat-grid-tile>
    </ng-container>
    <ng-container *ngFor="let versionRow of storyMap.versionRowList; let row = index">
      <mat-grid-tile [rowspan]="getFeatureRowSpan(row)">
        <inline-edit [content]="versionRow"></inline-edit>
      </mat-grid-tile>
      <mat-grid-tile [style.background]="'#eeeeee'" [rowspan]="getFeatureRowSpan(row)" *ngFor="let feature of storyMap.functionColList; let col = index">
        <div>
          <div
            cdkDropList
            [cdkDropListData]="getfeatureList(row, col)"
            class="example-list"
            (cdkDropListDropped)="drop($event)">
            <feature-card [content]="item.content" [type]="item.type" *ngFor="let item of getfeatureList(row, col)"
            cdkDrag>{{item}}</feature-card>
          </div>
          <div style="display: flex;">
          <mat-form-field appearance="fill" style="width: 60px;">
            <mat-select value="STORY" #issueType>
              <mat-select-trigger>
                <ng-container mat-card-avatar [ngSwitch]="issueType.value">
                  <mat-icon *ngSwitchCase="'STORY'" class="green" style="height: 38px;" aria-hidden="false" aria-label="故事" >bookmark</mat-icon>
                  <mat-icon *ngSwitchCase="'FEATURE'" class="purple" style="height: 38px;" aria-hidden="false" aria-label="任务" >bolt</mat-icon>
                  <mat-icon *ngSwitchCase="'TASK'" class="blue" style="height: 38px;" aria-hidden="false" aria-label="故障" >task</mat-icon>
                </ng-container>
              </mat-select-trigger>
              <mat-option value="STORY">
                <mat-icon class="green" aria-hidden="false" aria-label="故事" >bookmark</mat-icon>
                <span>故事</span>
              </mat-option>
              <mat-option value="FEATURE">
                <mat-icon class="purple" aria-hidden="false" aria-label="特性" >bolt</mat-icon>
                <span>特性</span>
              </mat-option>
              <mat-option value="TASK">
                <mat-icon class="blue" aria-hidden="false" aria-label="任务" >task</mat-icon>
                <span>任务</span>
                </mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="example-form-field" appearance="fill">
            <mat-label>在这里输入……</mat-label>
            <input matInput type="text" autocomplete="off" #issueInput>
            <button matSuffix mat-icon-button (click)="addIssue(issueType.value, issueInput.value,row, col)" >
              <mat-icon>input</mat-icon>
            </button>
          </mat-form-field>
        </div>
        </div>
      </mat-grid-tile>
    </ng-container>

  </mat-grid-list>
  <mat-form-field class="example-form-field" appearance="fill">
    <mat-label>添加版本</mat-label>
    <input matInput type="text" #version>
    <button  matSuffix mat-icon-button aria-label="Clear" (click)="addVersion(version.value)">
      <mat-icon>done</mat-icon>
    </button>
  </mat-form-field>
  <mat-form-field class="example-form-field" appearance="fill">
    <mat-label>添加功能</mat-label>
    <input matInput type="text" #function>
    <button  matSuffix mat-icon-button aria-label="Clear" (click)="addFunction(function.value)">
      <mat-icon>done</mat-icon>
    </button>
  </mat-form-field>
</div>
